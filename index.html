<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Spelling Bee Practice</title>
<style>
  body {
    font-family: "Poppins", Arial, sans-serif;
    text-align: center;
    background: #fffbee;
    color: #333;
    margin: 0;
    padding: 0;
  }
  h1 {
    color: #f4b400;
    margin-top: 20px;
  }
  select, input, button {
    font-size: 1rem;
    margin: 10px;
    padding: 10px;
    border-radius: 8px;
    border: 1px solid #ccc;
  }
  button {
    background: #f4b400;
    color: #fff;
    border: none;
    cursor: pointer;
  }
  button:hover {
    background: #e09e00;
  }
  #result {
    font-size: 1.2rem;
    margin-top: 20px;
    font-weight: bold;
  }
</style>
</head>
<body>
  <h1>Spelling Bee Practice</h1>

  <div>
    <label for="grade">Choose grade:</label>
    <select id="grade">
      <option value="4">4th Grade</option>
      <option value="5">5th Grade</option>
      <option value="6">6th Grade</option>
      <option value="7">7th Grade</option>
      <option value="8">8th Grade</option>
    </select>
  </div>

  <div>
    <button id="startBtn">Start</button>
    <button id="repeatBtn" disabled>Repeat Word</button>
  </div>

  <div>
    <input type="text" id="spellingInput" placeholder="Type your spelling here" disabled>
    <button id="checkBtn" disabled>Check</button>
  </div>

  <div id="result"></div>

<script>
// -------------------------------
// WORD LISTS BY GRADE
// -------------------------------
const wordLists = {
  4: [
    "hesitate","scorcher","scavenger","fragments","deflated","unleash",
    "ration","cosmetics","crawdad","frustration","unruly","mascot",
    "aroma","moustache","artifacts","perfume","discoveries","sinister",
    "tuxedo","prognosis","lurches","language","gallop","Buffalo","sequins",
    "fluently","fabulous","lanky","sardines","mysterious","brandished",
    "rickety","anguish","conical","porridge","lilt","pediatric","beige",
    "democracy","rummage","gaunt","ancestral","grimace","nautical",
    "enormous","geranium","foreign","dubious","ebony","paltry"
  ],
  5: ["verdict","garbled","encourages","imitation","miniature","receptionist","preamble","plausible","reprimanding","commotion","oblivion","immigrants","steeple","spectators","lanyards","suspicious","parchment","ramshackle","fugitive","heron","dissolving","nomad","billowed","skewer","Berlin","lunacy","conjure","bracken","noggin","neon","rakish","hypnosis","rotunda","gusto","toiletries","gleaned","jeered","winsome","prattling","galore","emporium","atrium","eccentric","savant","almanac","hippies","samosas","campaign","pistachio","mosque"],
  6: ["zombielike","warlock","colossus","convulsively","dimensional","garishly","graffitist","Everest","dexterity","cavorting","marauder","conscience","battlements","deferential","albatross","khaki","opalescent","asphalt","Yiddish","talcum","tranquilizer","equestrian","plaited","monsieur","manticores","prestigious","fraidycat","guttural","lo","mein","courier","sans","serif","psyche","stucco","Frankenstein","schema","et","cetera","vidimus","delphine","slough","archipelago","serape","puissance","pinioning","chignon","pheromone","galleon","magnanimous","chartreuse","wainscoting","Nehru"],
  7: ["gangly","swaggering","chimneys","riveted","plaid","dirge","zeal","whittled","depots","fiberglass","salvaged","fissures","enthusiastic","discipline","unfamiliar","scurrying","dignitaries","pizzeria","dismissal","skittish","careened","nomination","opportunist","dictatorship","comrades","sporadic","promenade","repugnant","invincible","renowned","parachute","laborious","appointment","foreseeable","ratify","scalpel","reclusive","compassionate","bulletin","alfalfa","officially","confidant","bayonet","amicable","exuberant","beautician","equations","assignment","ultimatum","whinnying"],
  8: ["squalor","memoirs","cylinders","ominous","muffler","syndrome","premises","safari","lasagna","substantially","mercantile","formidable","propaganda","marquee","proficient","compunction","emphatically","hyperventilated","ostracism","onslaught","ruefully","misanthrope","prototype","cravenly","mulberry","hypocritical","chlorine","traumatic","receipts","solemnly","begrudge","contentious","precocious","ensemble","cadre","lye","belfry","lacrosse","sluice","cajolery","vigilance","residuals","boutique","peroxide","aristocracy","apocalypse","tuberculosis","barricade","confreres","anonymously","unparalleled","barrette","chassis","junket","quandary","Erie","gingham","silhouette","auxiliary","thesaurus","patriarchs","chandelier","dulce","concierge","latticework","hibiscus","tamale","maracas","gyroplane","burpees","Adriatic","piccolo","au","revoir","tulle","boll","weevil","camphor","Tucson","paparazzi","pumpernickel","pogrom"]
};

// -------------------------------
// ALTERNATE SPELLINGS
// -------------------------------
const alternates = {
  moustache: ["mustache"],
  mustache: ["moustache"],
  artifacts: ["artefacts"],
  artefacts: ["artifacts"]
};

// -------------------------------
// GLOBALS
// -------------------------------
let currentWord = "";
let currentList = [];
let preferredVoice = null;

// -------------------------------
// SETUP VOICE (iPad SAFE)
// -------------------------------
function selectPreferredVoice(prefName = "Samantha") {
  const voices = speechSynthesis.getVoices();
  return voices.find(v => v.name === prefName)
      || voices.find(v => v.lang === "en-US")
      || voices[0];
}

speechSynthesis.onvoiceschanged = () => {
  preferredVoice = selectPreferredVoice("Samantha");
};

// -------------------------------
// FUNCTIONS
// -------------------------------
function speak(text) {
  const utter = new SpeechSynthesisUtterance(text);
  const voice = preferredVoice || selectPreferredVoice("Samantha");
  utter.voice = voice;
  utter.lang = voice.lang;
  speechSynthesis.speak(utter);
}

function pickNewWord() {
  const grade = document.getElementById("grade").value;
  currentList = wordLists[grade];
  const randomIndex = Math.floor(Math.random() * currentList.length);
  currentWord = currentList[randomIndex];
}

function startTest() {
  pickNewWord();
  speak(currentWord);
  document.getElementById("repeatBtn").disabled = false;
  document.getElementById("spellingInput").disabled = false;
  document.getElementById("checkBtn").disabled = false;
  document.getElementById("result").textContent = "";
  document.getElementById("spellingInput").value = "";
}

function repeatWord() {
  speak(currentWord);
}

function checkSpelling() {
  const input = document.getElementById("spellingInput").value.trim().toLowerCase();
  const correct = currentWord.toLowerCase();

  // Check alternates (both directions)
  const validAnswers = [correct, ...(alternates[correct] || []), ...(alternates[input] || [])];

  if (validAnswers.includes(input)) {
    document.getElementById("result").textContent = "✅ Correct!";
    document.getElementById("result").style.color = "green";
    pickNewWord();
    setTimeout(() => speak(currentWord), 1200);
  } else {
    document.getElementById("result").textContent = `❌ Incorrect. The correct spelling is "${currentWord}".`;
    document.getElementById("result").style.color = "red";
  }
}

// -------------------------------
// EVENT LISTENERS
// -------------------------------
document.getElementById("startBtn").addEventListener("click", startTest);
document.getElementById("repeatBtn").addEventListener("click", repeatWord);
document.getElementById("checkBtn").addEventListener("click", checkSpelling);
</script>
</body>
</html>
